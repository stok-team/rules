# Migration
스키마 마이그레이션에 관련된 규칙을 정의합니다.

## 목표
- 비용을 감수하더라도 다운타임의 최소화를 목표로 Expand and Contract 전략을 사용합니다.
- 구버전과 신버전의 코드가 동시에 서빙중이더라도 시스템 장애가 발생하지 않도록 Scaffolding 코드를 작성합니다.
- 문제발생시 빠르게 롤백할 수 있도록 Backword-Compatibility를 보장합니다.
- 마이그레이션 파일 단위를 가능한 최소화합니다.

## Revision
- 스키마 마이그레이션 툴로 Alembic을 사용합니다.
- 마이그레이션 파일 단위인 `Revision`의 파일명 규칙으로 아래를 따릅니다.
  - `ID`-`메시지`
  - ID: 초기값이 0인 [0,99]범위의 정수로 99초과시 0부터 다시 시작합니다.
    - ID 중복 및 의존성 사이클 방지를 위해 규칙에 따라 Revision 파일들을 Squash합니다.
  - Message: 영숫자(`[0-9a-zA-Z]`)와 하이픈(`-`)으로 문자열을 구성합니다.
    - 다른 Revision과 구별을 위해 사용합니다.
    - 가능한 단순한 메시지를 사용합니다.
    - 세부사항은 파일 내용과 커밋 메시지를 통해 파악합니다.
  - 예시) `00-create-user-table`
- Squash 규칙: TBD
